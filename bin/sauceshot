#!/usr/bin/env sh

DATE=$(date +'%d-%B-%y~%H:%M:%S'); \
DIR="$HOME/Pictures/Screenshots"
PIC="$DIR/$DATE.png"

[ ! -d "$DIR" ] && mkdir -pv "$DIR"

full(){ 
    maim -u "$PIC" ;
}

crop(){ 
    maim --select "$PIC" ;
}

view(){ 
    bspc desktop -f 5 && viewnior "$PIC" ;
}

abort(){ 
    dunstify -i face-crying "Error 404" ; 
    exit 1 ;
}

case "$1" in 
    full)
      full || abort
      xclip -selection c -t image/png "$PIC"
      view
      ;;
    crop)
      crop || abort 
      xclip -selection c -t image/png "$PIC"
      view
      ;;
esac
